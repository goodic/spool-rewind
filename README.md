# Перемотка катушек
Нужна помощь с данным проектом. Необходимо написать код (хотел написать "дописать" но кого я обманываю). В репозитории приложен черновик для отладки железа. Задача целиком описана ниже.

## Что требуется
Задача в общих чертах у аппарата достаточно простая. Отмотать 5м ленты и отрезать, отрезанный кусок смотеть на вторую катушку. По нажатию кнопки повторить.

Если рассматривать задачу более детально, то требуется следующее:
- при помощи ШД отмотать 5 метров ленты (количесвто шагов на 10см ленты известно). Идеально если после выдачи первых 20-30 см сделать замедление ШД на 5-10 секунд (время на заправку ленты в приемную катушку)
- через L293D запустить двигатель отрезчика и остановить его по сигналу от его концевика
- параллельно колекторным двигателем сматывать ленту. Про эту часть будет отдельный более подробный блок
- в идеале вместо 1 кнопки иметь 3: отмотка с отрезкой, просто отмотка и просто отрезка.
- совсем идеал: экран, возможность настроить метраж отмотки и выбор режима с автоматической отрезкой или по кнопке

## Что есть сейчас
На данный момент собран механизм выдачи и отрезки ленты. Известно число шагов ШД для отмотки 10см ленты - 3305. ШД управляется через 4988 драйвер. Есть отрезчик. Рез осуществляется подачей питания на колекторный двигатель через микосхему L293D. У отрезчика есть концевик который при парковке лезвия замыкается. Потому при начале отреза надо выждать некоторое время прежде чем начать считывать его состояние. А то можно и не начать резать

## про смотку ленты
Я вижу это отдельным от Ардуино устройством с двумя концевиками и выключателем. Подал питание - начало мотать со своей скоростью. Далее вступают в работу 2 концевика. Первый запускает намотку если лента проивсла ниже порога и мотает пока не сработает второй концевик, отвечающий за верхний порог когда лента уже почти натянута и дальше мотать не надо. Да, будет работать рывками, но просто и надежно. А после отрезки ленты он ее и доматает (конец болтаться не будет, на катушке будет прижим который будет помогать сохранить натяжение ленты)

##Технические детали в одном месте
- питание 24В. Для ардуины в схеме будет понижайка
- плата: Ардуионо нано на 328 Атмеге
- ШД управляется драйвером 4988. Делитель шагов джамперами на плате выставлю. Ноги для управления: Enable - 2, Step - 3, Direction - 4. В целом могу поменять, если важно
- Отрезчик. Пин для запуска двигателя 11, концевик висит на 12. Замыкается на землю. К питанию через резистор пока не притянут, но будет
- Про намотку написано выше